(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[6],{"99Ma":function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"addDisposer",(function(){return Y})),n.d(e,"addMiddleware",(function(){return jt})),n.d(e,"applyAction",(function(){return mt})),n.d(e,"applyPatch",(function(){return _})),n.d(e,"applySnapshot",(function(){return T})),n.d(e,"cast",(function(){return Q})),n.d(e,"castFlowReturn",(function(){return Ve})),n.d(e,"castToReferenceSnapshot",(function(){return tt})),n.d(e,"castToSnapshot",(function(){return X})),n.d(e,"clone",(function(){return $})),n.d(e,"createActionTrackingMiddleware",(function(){return yt})),n.d(e,"createActionTrackingMiddleware2",(function(){return bt})),n.d(e,"decorate",(function(){return Et})),n.d(e,"destroy",(function(){return G})),n.d(e,"detach",(function(){return W})),n.d(e,"escapeJsonPath",(function(){return Re})),n.d(e,"flow",(function(){return Ee})),n.d(e,"getChildType",(function(){return g})),n.d(e,"getEnv",(function(){return Z})),n.d(e,"getIdentifier",(function(){return F})),n.d(e,"getLivelinessChecking",(function(){return s})),n.d(e,"getMembers",(function(){return q})),n.d(e,"getNodeId",(function(){return et})),n.d(e,"getParent",(function(){return j})),n.d(e,"getParentOfType",(function(){return V})),n.d(e,"getPath",(function(){return D})),n.d(e,"getPathParts",(function(){return x})),n.d(e,"getPropertyMembers",(function(){return K})),n.d(e,"getRelativePath",(function(){return U})),n.d(e,"getRoot",(function(){return N})),n.d(e,"getRunningActionContext",(function(){return Nt})),n.d(e,"getSnapshot",(function(){return O})),n.d(e,"getType",(function(){return b})),n.d(e,"hasParent",(function(){return C})),n.d(e,"hasParentOfType",(function(){return E})),n.d(e,"isActionContextChildOf",(function(){return xt})),n.d(e,"isActionContextThisOrChildOf",(function(){return kt})),n.d(e,"isAlive",(function(){return J})),n.d(e,"isArrayType",(function(){return qe})),n.d(e,"isFrozenType",(function(){return kn})),n.d(e,"isIdentifierType",(function(){return Zn})),n.d(e,"isLateType",(function(){return Nn})),n.d(e,"isLiteralType",(function(){return gn})),n.d(e,"isMapType",(function(){return Je})),n.d(e,"isModelType",(function(){return on})),n.d(e,"isOptionalType",(function(){return On})),n.d(e,"isPrimitiveType",(function(){return yn})),n.d(e,"isProtected",(function(){return I})),n.d(e,"isReferenceType",(function(){return Un})),n.d(e,"isRefinementType",(function(){return wn})),n.d(e,"isRoot",(function(){return k})),n.d(e,"isStateTreeNode",(function(){return Bt})),n.d(e,"isType",(function(){return ht})),n.d(e,"isUnionType",(function(){return Sn})),n.d(e,"isValidReference",(function(){return H})),n.d(e,"joinJsonPath",(function(){return Fe})),n.d(e,"onAction",(function(){return _t})),n.d(e,"onPatch",(function(){return m})),n.d(e,"onSnapshot",(function(){return w})),n.d(e,"process",(function(){return oe})),n.d(e,"protect",(function(){return S})),n.d(e,"recordActions",(function(){return wt})),n.d(e,"recordPatches",(function(){return P})),n.d(e,"resolveIdentifier",(function(){return z})),n.d(e,"resolvePath",(function(){return R})),n.d(e,"setLivelinessChecking",(function(){return a})),n.d(e,"setLivelynessChecking",(function(){return u})),n.d(e,"splitJsonPath",(function(){return Me})),n.d(e,"toGenerator",(function(){return De})),n.d(e,"toGeneratorFunction",(function(){return Ne})),n.d(e,"tryReference",(function(){return M})),n.d(e,"tryResolve",(function(){return L})),n.d(e,"typecheck",(function(){return $t})),n.d(e,"types",(function(){return Qn})),n.d(e,"unescapeJsonPath",(function(){return ze})),n.d(e,"unprotect",(function(){return A})),n.d(e,"walk",(function(){return B}));var r,i=n("2vnA"),o="warn";function a(t){o=t}function s(){return o}function u(t){a(t)}!function(t){t.afterCreate="afterCreate",t.afterAttach="afterAttach",t.afterCreationFinalization="afterCreationFinalization",t.beforeDetach="beforeDetach",t.beforeDestroy="beforeDestroy"}(r||(r={}));var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function p(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var f=function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function h(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function l(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t}function b(t){return Kt(t,1),qt(t).type}function g(t,e){return Kt(t,1),qt(t).getChildType(e)}function m(t,e){return Kt(t,1),Te(e,2),qt(t).onPatch(e)}function w(t,e){return Kt(t,1),Te(e,2),qt(t).onSnapshot(e)}function _(t,e){Kt(t,1),Ie(e,(function(t){return"object"===typeof t}),"object or array",2),qt(t).applyPatches(le(e))}function P(t,e){Kt(t,1);var n,r={patches:[],reversedInversePatches:[]},i={},o={get recording(){return!!n},get patches(){return i.patches||(i.patches=r.patches.slice()),i.patches},get reversedInversePatches(){return i.reversedInversePatches||(i.reversedInversePatches=r.reversedInversePatches.slice()),i.reversedInversePatches},get inversePatches(){return i.inversePatches||(i.inversePatches=r.reversedInversePatches.slice().reverse()),i.inversePatches},stop:function(){n&&(n(),n=void 0)},resume:function(){n||(n=m(t,(function(t,n){e&&!e(t,n,Nt())||(r.patches.push(t),r.reversedInversePatches.unshift(n),i.patches=void 0,i.inversePatches=void 0,i.reversedInversePatches=void 0)})))},replay:function(e){_(e||t,r.patches)},undo:function(e){_(e||t,r.reversedInversePatches)}};return o.resume(),o}function S(t){Kt(t,1);var e=qt(t);if(!e.isRoot)throw ce("`protect` can only be invoked on root nodes");e.isProtectionEnabled=!0}function A(t){Kt(t,1);var e=qt(t);if(!e.isRoot)throw ce("`unprotect` can only be invoked on root nodes");e.isProtectionEnabled=!1}function I(t){return qt(t).isProtected}function T(t,e){return Kt(t,1),qt(t).applySnapshot(e)}function O(t,e){void 0===e&&(e=!0),Kt(t,1);var n=qt(t);return e?n.snapshot:be(n.type.getSnapshot(n,!1))}function C(t,e){void 0===e&&(e=1),Kt(t,1),Oe(e,2,0);for(var n=qt(t).parent;n;){if(0===--e)return!0;n=n.parent}return!1}function j(t,e){void 0===e&&(e=1),Kt(t,1),Oe(e,2,0);for(var n=e,r=qt(t).parent;r;){if(0===--n)return r.storedValue;r=r.parent}throw ce("Failed to find the parent of "+qt(t)+" at depth "+e)}function E(t,e){Kt(t,1),lt(e,2);for(var n=qt(t).parent;n;){if(e.is(n.storedValue))return!0;n=n.parent}return!1}function V(t,e){Kt(t,1),lt(e,2);for(var n=qt(t).parent;n;){if(e.is(n.storedValue))return n.storedValue;n=n.parent}throw ce("Failed to find the parent of "+qt(t)+" of a given type")}function N(t){return Kt(t,1),qt(t).root.storedValue}function D(t){return Kt(t,1),qt(t).path}function x(t){return Kt(t,1),Me(qt(t).path)}function k(t){return Kt(t,1),qt(t).isRoot}function R(t,e){Kt(t,1),Ce(e,2);var n=ne(qt(t),e);return n?n.value:void 0}function z(t,e,n){lt(t,1),Kt(e,2),Ie(n,Kn,"string or number (identifier)",3);var r=qt(e).root.identifierCache.resolve(t,Bn(n));return r?r.value:void 0}function F(t){return Kt(t,1),qt(t).identifier}function M(t,e){void 0===e&&(e=!0);try{var n=t();if(void 0===n||null===n)return;if(Bt(n))return e?J(n)?n:void 0:n;throw ce("The reference to be checked is not one of node, null or undefined")}catch(r){if(r instanceof zn)return;throw r}}function H(t,e){void 0===e&&(e=!0);try{var n=t();if(void 0===n||null===n)return!1;if(Bt(n))return!e||J(n);throw ce("The reference to be checked is not one of node, null or undefined")}catch(r){if(r instanceof zn)return!1;throw r}}function L(t,e){Kt(t,1),Ce(e,2);var n=ne(qt(t),e,!1);if(void 0!==n)try{return n.value}catch(r){return}}function U(t,e){return Kt(t,1),Kt(e,2),ee(qt(t),qt(e))}function $(t,e){void 0===e&&(e=!0),Kt(t,1);var n=qt(t);return n.type.create(n.snapshot,!0===e?n.root.environment:!1===e?void 0:e)}function W(t){return Kt(t,1),qt(t).detach(),t}function G(t){Kt(t,1);var e=qt(t);e.isRoot?e.die():e.parent.removeChild(e.subpath)}function J(t){return Kt(t,1),qt(t).observableIsAlive}function Y(t,e){return Kt(t,1),Te(e,2),qt(t).addDisposer(e),e}function Z(t){Kt(t,1);var e=qt(t).root.environment;return e||se}function B(t,e){Kt(t,1),Te(e,2);var n=qt(t);n.getChildren().forEach((function(t){Bt(t.storedValue)&&B(t.storedValue,e)})),e(n.storedValue)}function K(t){var e;return Ie(e=Bt(t)?b(t):t,(function(t){return on(t)}),"model type or model instance",1),{name:e.name,properties:f({},e.properties)}}function q(t){var e=qt(t).type,n=f(f({},K(e)),{actions:[],volatile:[],views:[]});return Object.getOwnPropertyNames(t).forEach((function(e){if(!(e in n.properties)){var r=Object.getOwnPropertyDescriptor(t,e);r.get?Object(i.isComputedProp)(t,e)?n.views.push(e):n.volatile.push(e):!0===r.value._isMSTAction?n.actions.push(e):Object(i.isObservableProp)(t,e)?n.volatile.push(e):n.views.push(e)}})),n}function Q(t){return t}function X(t){return t}function tt(t){return t}function et(t){return Kt(t,1),qt(t).nodeId}var nt,rt=function(){function t(t,e,n,r){this.type=t,this.environment=r,this._state=Wt.INITIALIZING,this.environment=r,this.baseSetParent(e,n)}return Object.defineProperty(t.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){var e=this.isAlive;this._state=t;var n=this.isAlive;this.aliveAtom&&e!==n&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),t.prototype.fireInternalHook=function(t){this._hookSubscribers&&this._hookSubscribers.emit(t,this,t)},t.prototype.registerHook=function(t,e){return this._hookSubscribers||(this._hookSubscribers=new we),this._hookSubscribers.register(t,e)},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),t.prototype.baseSetParent=function(t,e){this._parent=t,this._subpath=e,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()},Object.defineProperty(t.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),t.prototype.getEscapedPath=function(t){return t&&(this.pathAtom||(this.pathAtom=Object(i.createAtom)("path")),this.pathAtom.reportObserved()),this.parent?(void 0===this._escapedSubpath&&(this._escapedSubpath=this._subpath?Re(this._subpath):""),this.parent.getEscapedPath(t)+"/"+this._escapedSubpath):""},Object.defineProperty(t.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAlive",{get:function(){return this.state!==Wt.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDetaching",{get:function(){return this.state===Wt.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=Object(i.createAtom)("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),t.prototype.baseFinalizeCreation=function(t){if(this.state===Wt.CREATED){if(this.parent){if(this.parent.state!==Wt.FINALIZED)return;this.fireHook(r.afterAttach)}this.state=Wt.FINALIZED,t&&t()}},t.prototype.baseFinalizeDeath=function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=Wt.DEAD},t.prototype.baseAboutToDie=function(){this.fireHook(r.beforeDestroy)},t}(),it=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;try{a.storedValue=e.createNewInstance(o)}catch(s){throw a.state=Wt.DEAD,s}return a.state=Wt.CREATED,a.finalizeCreation(),a}return p(e,t),Object.defineProperty(e.prototype,"root",{get:function(){if(!this.parent)throw ce("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),e.prototype.setParent=function(t,e){var n=this.parent!==t,r=this.subpath!==e;(n||r)&&(this.environment=void 0,this.baseSetParent(this.parent,e))},Object.defineProperty(e.prototype,"snapshot",{get:function(){return be(this.getSnapshot())},enumerable:!1,configurable:!0}),e.prototype.getSnapshot=function(){return this.type.getSnapshot(this)},e.prototype.toString=function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+t+(this.isAlive?"":" [dead]")},e.prototype.die=function(){this.isAlive&&this.state!==Wt.DETACHING&&(this.aboutToDie(),this.finalizeDeath())},e.prototype.finalizeCreation=function(){this.baseFinalizeCreation()},e.prototype.aboutToDie=function(){this.baseAboutToDie()},e.prototype.finalizeDeath=function(){this.baseFinalizeDeath()},e.prototype.fireHook=function(t){this.fireInternalHook(t)},h([i.action],e.prototype,"die",null),e}(rt),ot=1,at={onError:function(t){throw t}},st=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;if(a.nodeId=++ot,a.isProtectionEnabled=!0,a._autoUnbox=!0,a._isRunningAction=!1,a._hasSnapshotReaction=!1,a._observableInstanceState=0,a._cachedInitialSnapshotCreated=!1,a.unbox=a.unbox.bind(a),a._initialSnapshot=be(o),a.identifierAttribute=e.identifierAttribute,n||(a.identifierCache=new Jt),a._childNodes=e.initializeChildNodes(a,a._initialSnapshot),a.identifier=null,a.unnormalizedIdentifier=null,a.identifierAttribute&&a._initialSnapshot){var s=a._initialSnapshot[a.identifierAttribute];if(void 0===s){var u=a._childNodes[a.identifierAttribute];u&&(s=u.value)}if("string"!==typeof s&&"number"!==typeof s)throw ce("Instance identifier '"+a.identifierAttribute+"' for type '"+a.type.name+"' must be a string or a number");a.identifier=Bn(s),a.unnormalizedIdentifier=s}return n?n.root.identifierCache.addNodeToCache(a):a.identifierCache.addNodeToCache(a),a}return p(e,t),e.prototype.applyPatches=function(t){this.createObservableInstanceIfNeeded(),this._applyPatches(t)},e.prototype.applySnapshot=function(t){this.createObservableInstanceIfNeeded(),this._applySnapshot(t)},e.prototype.createObservableInstanceIfNeeded=function(){0===this._observableInstanceState&&this.createObservableInstance()},e.prototype.createObservableInstance=function(){var t,e;this._observableInstanceState=1;for(var n=[],o=this.parent;o&&0===o._observableInstanceState;)n.unshift(o),o=o.parent;try{for(var a=d(n),s=a.next();!s.done;s=a.next()){s.value.createObservableInstanceIfNeeded()}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}var u,c,p=this.type;try{this.storedValue=p.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,p.finalizeNewInstance(this,this.storedValue)}catch(h){throw this.state=Wt.DEAD,h}finally{this._isRunningAction=!1}this._observableInstanceState=2,u=this,c="snapshot",Object(i.getAtom)(u,c).trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=se,this.state=Wt.CREATED,this.fireHook(r.afterCreate),this.finalizeCreation()},Object.defineProperty(e.prototype,"root",{get:function(){var t=this.parent;return t?t.root:this},enumerable:!1,configurable:!0}),e.prototype.clearParent=function(){if(this.parent){this.fireHook(r.beforeDetach);var t=this.state;this.state=Wt.DETACHING;var e=this.root,n=e.environment,i=e.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=n,this.identifierCache=i}finally{this.state=t}}},e.prototype.setParent=function(t,e){var n=t!==this.parent,i=e!==this.subpath;(n||i)&&(n?(this.environment=void 0,t.root.identifierCache.mergeCache(this),this.baseSetParent(t,e),this.fireHook(r.afterAttach)):i&&this.baseSetParent(this.parent,e))},e.prototype.fireHook=function(t){var e=this;this.fireInternalHook(t);var n=this.storedValue&&"object"===typeof this.storedValue&&this.storedValue[t];"function"===typeof n&&(i._allowStateChangesInsideComputed?Object(i._allowStateChangesInsideComputed)((function(){n.apply(e.storedValue)})):n.apply(this.storedValue))},Object.defineProperty(e.prototype,"snapshot",{get:function(){return be(this.getSnapshot())},enumerable:!1,configurable:!0}),e.prototype.getSnapshot=function(){return this.isAlive?2===this._observableInstanceState?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath},e.prototype._getActualSnapshot=function(){return this.type.getSnapshot(this)},e.prototype._getCachedInitialSnapshot=function(){if(!this._cachedInitialSnapshotCreated){var t=this.type,e=this._childNodes,n=this._initialSnapshot;this._cachedInitialSnapshot=t.processInitialSnapshot(e,n),this._cachedInitialSnapshotCreated=!0}return this._cachedInitialSnapshot},e.prototype.isRunningAction=function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()},e.prototype.assertAlive=function(t){var e=s();if(!this.isAlive&&"ignore"!==e){var n=this._getAssertAliveError(t);switch(e){case"error":throw ce(n);case"warn":Ae(n)}}},e.prototype._getAssertAliveError=function(t){var e=this.getEscapedPath(!1)||this.pathUponDeath||"",n=t.subpath&&Re(t.subpath)||"",r=t.actionContext||At();r&&"action"!==r.type&&r.parentActionEvent&&(r=r.parentActionEvent);var i="";r&&null!=r.name&&(i=(r&&r.context&&D(r.context)||e)+"."+r.name+"()");return"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+e+"', Subpath: '"+n+"', Action: '"+i+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."},e.prototype.getChildNode=function(t){this.assertAlive({subpath:t}),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildNode(this,t):this._childNodes[t]}finally{this._autoUnbox=!0}},e.prototype.getChildren=function(){this.assertAlive(se),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildren(this):ie(this._childNodes)}finally{this._autoUnbox=!0}},e.prototype.getChildType=function(t){return this.type.getChildType(t)},Object.defineProperty(e.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),e.prototype.assertWritable=function(t){if(this.assertAlive(t),!this.isRunningAction()&&this.isProtected)throw ce("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")},e.prototype.removeChild=function(t){this.type.removeChild(this,t)},e.prototype.unbox=function(t){return t?(this.assertAlive({subpath:t.subpath||t.subpathUponDeath}),this._autoUnbox?t.value:t):t},e.prototype.toString=function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>",e=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+t+e+(this.isAlive?"":" [dead]")},e.prototype.finalizeCreation=function(){var t=this;this.baseFinalizeCreation((function(){var e,n;try{for(var i=d(t.getChildren()),o=i.next();!o.done;o=i.next()){o.value.finalizeCreation()}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}t.fireInternalHook(r.afterCreationFinalization)}))},e.prototype.detach=function(){if(!this.isAlive)throw ce("Error while detaching, node is not alive.");this.clearParent()},e.prototype.preboot=function(){var t=this;this._applyPatches=Ct(this.storedValue,"@APPLY_PATCHES",(function(e){e.forEach((function(e){var n=Me(e.path);re(t,n.slice(0,-1)).applyPatchLocally(n[n.length-1],e)}))})),this._applySnapshot=Ct(this.storedValue,"@APPLY_SNAPSHOT",(function(e){if(e!==t.snapshot)return t.type.applySnapshot(t,e)})),ge(this.storedValue,"$treenode",this),ge(this.storedValue,"toJSON",Xt)},e.prototype.die=function(){this.isAlive&&this.state!==Wt.DETACHING&&(this.aboutToDie(),this.finalizeDeath())},e.prototype.aboutToDie=function(){0!==this._observableInstanceState&&(this.getChildren().forEach((function(t){t.aboutToDie()})),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))},e.prototype.finalizeDeath=function(){this.getChildren().forEach((function(t){t.finalizeDeath()})),this.root.identifierCache.notifyDied(this);var t=this.snapshot;this._snapshotUponDeath=t,this._internalEventsClearAll(),this.baseFinalizeDeath()},e.prototype.onSnapshot=function(t){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",t)},e.prototype.emitSnapshot=function(t){this._internalEventsEmit("snapshot",t)},e.prototype.onPatch=function(t){return this._internalEventsRegister("patch",t)},e.prototype.emitPatch=function(t,e){if(this._internalEventsHasSubscribers("patch")){var n=y(function(t){if(!("oldValue"in t))throw ce("Patches without `oldValue` field cannot be inversed");return[xe(t),ke(t)]}(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r];for(var o in i)t[o]=i[o]}return t}({},t,{path:e.path.substr(this.path.length)+"/"+t.path})),2),r=n[0],i=n[1];this._internalEventsEmit("patch",r,i)}this.parent&&this.parent.emitPatch(t,e)},e.prototype.hasDisposer=function(t){return this._internalEventsHas("dispose",t)},e.prototype.addDisposer=function(t){if(this.hasDisposer(t))throw ce("cannot add a disposer when it is already registered for execution");this._internalEventsRegister("dispose",t,!0)},e.prototype.removeDisposer=function(t){if(!this._internalEventsHas("dispose",t))throw ce("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",t)},e.prototype.removeMiddleware=function(t){if(this.middlewares){var e=this.middlewares.indexOf(t);e>=0&&this.middlewares.splice(e,1)}},e.prototype.addMiddleWare=function(t,e){var n=this;void 0===e&&(e=!0);var r={handler:t,includeHooks:e};return this.middlewares?this.middlewares.push(r):this.middlewares=[r],function(){n.removeMiddleware(r)}},e.prototype.applyPatchLocally=function(t,e){this.assertWritable({subpath:t}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,t,e)},e.prototype._addSnapshotReaction=function(){var t=this;if(!this._hasSnapshotReaction){var e=Object(i.reaction)((function(){return t.snapshot}),(function(e){return t.emitSnapshot(e)}),at);this.addDisposer(e),this._hasSnapshotReaction=!0}},e.prototype._internalEventsHasSubscribers=function(t){return!!this._internalEvents&&this._internalEvents.hasSubscribers(t)},e.prototype._internalEventsRegister=function(t,e,n){return void 0===n&&(n=!1),this._internalEvents||(this._internalEvents=new we),this._internalEvents.register(t,e,n)},e.prototype._internalEventsHas=function(t,e){return!!this._internalEvents&&this._internalEvents.has(t,e)},e.prototype._internalEventsUnregister=function(t,e){this._internalEvents&&this._internalEvents.unregister(t,e)},e.prototype._internalEventsEmit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._internalEvents&&(e=this._internalEvents).emit.apply(e,v([t],n))},e.prototype._internalEventsClear=function(t){this._internalEvents&&this._internalEvents.clear(t)},e.prototype._internalEventsClearAll=function(){this._internalEvents&&this._internalEvents.clearAll()},h([i.action],e.prototype,"createObservableInstance",null),h([i.computed],e.prototype,"snapshot",null),h([i.action],e.prototype,"detach",null),h([i.action],e.prototype,"die",null),e}(rt);!function(t){t[t.String=1]="String",t[t.Number=2]="Number",t[t.Boolean=4]="Boolean",t[t.Date=8]="Date",t[t.Literal=16]="Literal",t[t.Array=32]="Array",t[t.Map=64]="Map",t[t.Object=128]="Object",t[t.Frozen=256]="Frozen",t[t.Optional=512]="Optional",t[t.Reference=1024]="Reference",t[t.Identifier=2048]="Identifier",t[t.Late=4096]="Late",t[t.Refinement=8192]="Refinement",t[t.Union=16384]="Union",t[t.Null=32768]="Null",t[t.Undefined=65536]="Undefined",t[t.Integer=131072]="Integer",t[t.Custom=262144]="Custom",t[t.SnapshotProcessor=524288]="SnapshotProcessor"}(nt||(nt={}));var ut="cannotDetermine",ct=function(){function t(t){this.isType=!0,this.name=t}return t.prototype.create=function(t,e){return Ut(this,t),this.instantiate(null,"",e,t).value},t.prototype.getSnapshot=function(t,e){throw ce("unimplemented method")},t.prototype.isAssignableFrom=function(t){return t===this},t.prototype.validate=function(t,e){if(Qt(t)){var n=b(t);return this.isAssignableFrom(n)?Mt():Ht(e,t)}return this.isValidSnapshot(t,e)},t.prototype.is=function(t){return 0===this.validate(t,[{path:"",type:this}]).length},Object.defineProperty(t.prototype,"Type",{get:function(){throw ce("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TypeWithoutSTN",{get:function(){throw ce("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SnapshotType",{get:function(){throw ce("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CreationType",{get:function(){throw ce("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),h([i.action],t.prototype,"create",null),t}(),pt=function(t){function e(e){return t.call(this,e)||this}return p(e,t),e.prototype.create=function(e,n){return void 0===e&&(e=this.getDefaultSnapshot()),t.prototype.create.call(this,e,n)},e.prototype.getValue=function(t){return t.createObservableInstanceIfNeeded(),t.storedValue},e.prototype.tryToReconcileNode=function(t,e){return!t.isDetaching&&(t.snapshot===e||(!(!Bt(e)||qt(e)!==t)||!(t.type!==this||!ye(e)||Bt(e)||t.identifierAttribute&&t.identifier!==Bn(e[t.identifierAttribute]))&&(t.applySnapshot(e),!0)))},e.prototype.reconcile=function(t,e,n,r){if(this.tryToReconcileNode(t,e))return t.setParent(n,r),t;if(t.die(),Bt(e)&&this.isAssignableFrom(b(e))){var i=qt(e);return i.setParent(n,r),i}return this.instantiate(n,r,void 0,e)},e.prototype.getSubTypes=function(){return null},h([i.action],e.prototype,"create",null),e}(ct),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.createNewInstance=function(t){return t},e.prototype.getValue=function(t){return t.storedValue},e.prototype.getSnapshot=function(t){return t.storedValue},e.prototype.reconcile=function(t,e,n,r){if(!t.isDetaching&&t.type===this&&t.storedValue===e)return t;var i=this.instantiate(n,r,void 0,e);return t.die(),i},e.prototype.getSubTypes=function(){return null},e}(ct);function ht(t){return"object"===typeof t&&t&&!0===t.isType}function lt(t,e){Ie(t,ht,"mobx-state-tree type",e)}var dt=new Map;function yt(t){return function(e,n,r){switch(e.type){case"action":if(t.filter&&!0!==t.filter(e))return n(e);var i=t.onStart(e);t.onResume(e,i),dt.set(e.id,{call:e,context:i,async:!1});try{var o=n(e);return t.onSuspend(e,i),!1===dt.get(e.id).async&&(dt.delete(e.id),t.onSuccess(e,i,o)),o}catch(s){throw dt.delete(e.id),t.onFail(e,i,s),s}case"flow_spawn":return(a=dt.get(e.rootId)).async=!0,n(e);case"flow_resume":case"flow_resume_error":var a=dt.get(e.rootId);t.onResume(e,a.context);try{return n(e)}finally{t.onSuspend(e,a.context)}case"flow_throw":a=dt.get(e.rootId);return dt.delete(e.rootId),t.onFail(e,a.context,e.args[0]),n(e);case"flow_return":a=dt.get(e.rootId);return dt.delete(e.rootId),t.onSuccess(e,a.context,e.args[0]),n(e)}}}var vt=function(){function t(t,e){this.hooks=t,this.call=e,this.flowsPending=0,this.running=!0,t&&t.onStart(e)}return t.prototype.finish=function(t){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,t))},t.prototype.incFlowsPending=function(){this.flowsPending++},t.prototype.decFlowsPending=function(){this.flowsPending--},Object.defineProperty(t.prototype,"hasFlowsPending",{get:function(){return this.flowsPending>0},enumerable:!1,configurable:!0}),t}();function bt(t){var e=new WeakMap;return function(n,r){var i=n.parentActionEvent?e.get(n.parentActionEvent):void 0;if("action"===n.type){var o=f(f({},n),{env:i&&i.call.env,parentCall:i&&i.call}),a=!t.filter||t.filter(o),s=new vt(a?t:void 0,o);e.set(n,s);var u=void 0;try{u=r(n)}catch(p){throw s.finish(p),p}return s.hasFlowsPending||s.finish(),u}if(!i)return r(n);switch(n.type){case"flow_spawn":return i.incFlowsPending(),r(n);case"flow_resume":case"flow_resume_error":return r(n);case"flow_throw":var c=n.args[0];try{return r(n)}finally{i.decFlowsPending(),i.hasFlowsPending||i.finish(c)}case"flow_return":try{return r(n)}finally{i.decFlowsPending(),i.hasFlowsPending||i.finish()}}}}function gt(t){return{$MST_UNSERIALIZABLE:!0,type:t}}function mt(t,e){Kt(t,1),Ie(e,(function(t){return"object"===typeof t}),"object or array",2),Object(i.runInAction)((function(){le(e).forEach((function(e){return function(t,e){var n=L(t,e.path||"");if(!n)throw ce("Invalid action path: "+(e.path||""));var r=qt(n);if("@APPLY_PATCHES"===e.name)return _.call(null,n,e.args[0]);if("@APPLY_SNAPSHOT"===e.name)return T.call(null,n,e.args[0]);if("function"!==typeof n[e.name])throw ce("Action '"+e.name+"' does not exist in '"+r.path+"'");return n[e.name].apply(n,e.args?e.args.map((function(t){return(e=t)&&"object"===typeof e&&"$MST_DATE"in e?new Date(e.$MST_DATE):e;var e})):[])}(t,e)}))}))}function wt(t,e){Kt(t,1);var n,r=[],i=function(t){(!e||e(t,Nt()))&&r.push(t)},o={actions:r,get recording(){return!!n},stop:function(){n&&(n(),n=void 0)},resume:function(){n||(n=_t(t,i))},replay:function(t){mt(t,r)}};return o.resume(),o}function _t(t,e,n){return void 0===n&&(n=!1),Kt(t,1),jt(t,(function(r,i){if("action"===r.type&&r.id===r.rootId){var o=qt(r.context),a={name:r.name,path:ee(qt(t),o),args:r.args.map((function(t,e){return function(t,e,n,r){if(r instanceof Date)return{$MST_DATE:r.getTime()};if(ve(r))return r;if(Bt(r))return gt("[MSTNode: "+b(r).name+"]");if("function"===typeof r)return gt("[function]");if("object"===typeof r&&!de(r)&&!he(r))return gt("[object "+(r&&r.constructor&&r.constructor.name||"Complex Object")+"]");try{return JSON.stringify(r),r}catch(i){return gt(""+i)}}(0,r.name,0,t)}))};if(n){var s=i(r);return e(a),s}return e(a),i(r)}return i(r)}))}var Pt,St=1;function At(){return Pt}function It(){return St++}function Tt(t,e){var n=qt(t.context);"action"===t.type&&n.assertAlive({actionContext:t});var o=n._isRunningAction;n._isRunningAction=!0;var a=Pt;Pt=t;try{return function(t,e,n){var o=new Vt(t,n);if(o.isEmpty)return Object(i.action)(n).apply(null,e.args);var a=null;function s(t){var e=o.getNextMiddleware(),u=e&&e.handler;if(!u)return Object(i.action)(n).apply(null,t.args);if(!e.includeHooks&&r[t.name])return s(t);function c(t,e){!0,a=s(t),e&&(a=e(a))}function p(t){!0,a=t}return u(t,c,p),a}return s(e)}(n,t,e)}finally{Pt=a,n._isRunningAction=o}}function Ot(t){if(t)return"action"===t.type?t:t.parentActionEvent}function Ct(t,e,n){var r=function(){var r=It(),i=Pt,o=Ot(i);return Tt({type:"action",name:e,id:r,args:_e(arguments),context:t,tree:N(t),rootId:i?i.rootId:r,parentId:i?i.id:0,allParentIds:i?v(i.allParentIds,[i.id]):[],parentEvent:i,parentActionEvent:o},n)};return r._isMSTAction=!0,r}function jt(t,e,n){void 0===n&&(n=!0);var r=qt(t);return r.addMiddleWare(e,n)}function Et(t,e,n){void 0===n&&(n=!0);var r={handler:t,includeHooks:n};return e.$mst_middleware=e.$mst_middleware||[],e.$mst_middleware.push(r),e}var Vt=function(){function t(t,e){this.arrayIndex=0,this.inArrayIndex=0,this.middlewares=[],e.$mst_middleware&&this.middlewares.push(e.$mst_middleware);for(var n=t;n;)n.middlewares&&this.middlewares.push(n.middlewares),n=n.parent}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),t.prototype.getNextMiddleware=function(){var t=this.middlewares[this.arrayIndex];if(t){var e=t[this.inArrayIndex++];return e||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}},t}();function Nt(){for(var t=At();t&&"action"!==t.type;)t=t.parentActionEvent;return t}function Dt(t,e,n){for(var r="number"===typeof e?e:e.id,i=n?t:t.parentActionEvent;i;){if(i.id===r)return!0;i=i.parentActionEvent}return!1}function xt(t,e){return Dt(t,e,!1)}function kt(t,e){return Dt(t,e,!0)}function Rt(t){return"function"===typeof t?"<function"+(t.name?" "+t.name:"")+">":Bt(t)?"<"+t+">":"`"+function(t){try{return JSON.stringify(t)}catch(e){return"<Unserializable: "+e+">"}}(t)+"`"}function zt(t){var e=t.value,n=t.context[t.context.length-1].type,r=t.context.map((function(t){return t.path})).filter((function(t){return t.length>0})).join("/"),i=r.length>0?'at path "/'+r+'" ':"",o=Bt(e)?"value of type "+qt(e).type.name+":":ve(e)?"value":"snapshot",a=n&&Bt(e)&&n.is(qt(e).snapshot);return""+i+o+" "+Rt(e)+" is not assignable "+(n?"to type: `"+n.name+"`":"")+(t.message?" ("+t.message+")":"")+(n?yn(n)||ve(e)?".":", expected an instance of `"+n.name+"` or a snapshot like `"+n.describe()+"` instead."+(a?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function Ft(t,e,n){return t.concat([{path:e,type:n}])}function Mt(){return ae}function Ht(t,e,n){return[{context:t,value:e,message:n}]}function Lt(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function Ut(e,n){"undefined"!==typeof t&&t.env&&"true"===t.env.ENABLE_TYPE_CHECK&&$t(e,n)}function $t(t,e){var n=t.validate(e,[{path:"",type:t}]);if(n.length>0)throw ce(function(t,e,n){if(0===n.length)return;return"Error while converting "+(r=Rt(e),(r.length<280?r:r.substring(0,272)+"......"+r.substring(r.length-8))+" to `")+t.name+"`:\n\n    "+n.map(zt).join("\n    ");var r}(t,e,n))}var Wt,Gt=0,Jt=function(){function t(){this.cacheId=Gt++,this.cache=i.observable.map(),this.lastCacheModificationPerId=i.observable.map()}return t.prototype.updateLastCacheModificationPerId=function(t){var e=this.lastCacheModificationPerId.get(t);this.lastCacheModificationPerId.set(t,void 0===e?1:e+1)},t.prototype.getLastCacheModificationPerId=function(t){var e=this.lastCacheModificationPerId.get(t)||0;return this.cacheId+"-"+e},t.prototype.addNodeToCache=function(t,e){if(void 0===e&&(e=!0),t.identifierAttribute){var n=t.identifier;this.cache.has(n)||this.cache.set(n,i.observable.array([],ue));var r=this.cache.get(n);if(-1!==r.indexOf(t))throw ce("Already registered");r.push(t),e&&this.updateLastCacheModificationPerId(n)}},t.prototype.mergeCache=function(t){var e=this;Object(i.values)(t.identifierCache.cache).forEach((function(t){return t.forEach((function(t){e.addNodeToCache(t)}))}))},t.prototype.notifyDied=function(t){if(t.identifierAttribute){var e=t.identifier,n=this.cache.get(e);n&&(n.remove(t),n.length||this.cache.delete(e),this.updateLastCacheModificationPerId(t.identifier))}},t.prototype.splitCache=function(e){var n=this,r=new t,o=e.path;return Object(i.entries)(this.cache).forEach((function(t){for(var e=y(t,2),i=e[0],a=e[1],s=!1,u=a.length-1;u>=0;u--)0===a[u].path.indexOf(o)&&(r.addNodeToCache(a[u],!1),a.splice(u,1),s=!0);s&&n.updateLastCacheModificationPerId(i)})),r},t.prototype.has=function(t,e){var n=this.cache.get(e);return!!n&&n.some((function(e){return t.isAssignableFrom(e.type)}))},t.prototype.resolve=function(t,e){var n=this.cache.get(e);if(!n)return null;var r=n.filter((function(e){return t.isAssignableFrom(e.type)}));switch(r.length){case 0:return null;case 1:return r[0];default:throw ce("Cannot resolve a reference to type '"+t.name+"' with id: '"+e+"' unambigously, there are multiple candidates: "+r.map((function(t){return t.path})).join(", "))}},t}();function Yt(t,e,n,r,i){var o=Qt(i);if(o){if(o.parent)throw ce("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(e?e.path:"")+"/"+n+"', but it lives already at '"+o.path+"'");return e&&o.setParent(e,n),o}return new st(t,e,n,r,i)}function Zt(t,e,n,r,i){return new it(t,e,n,r,i)}function Bt(t){return!(!t||!t.$treenode)}function Kt(t,e){Ie(t,Bt,"mobx-state-tree node",e)}function qt(t){if(!Bt(t))throw ce("Value "+t+" is no MST Node");return t.$treenode}function Qt(t){return t&&t.$treenode||null}function Xt(){return qt(this).snapshot}!function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CREATED=1]="CREATED",t[t.FINALIZED=2]="FINALIZED",t[t.DETACHING=3]="DETACHING",t[t.DEAD=4]="DEAD"}(Wt||(Wt={}));var te=function(t){return".."};function ee(t,e){if(t.root!==e.root)throw ce("Cannot calculate relative path: objects '"+t+"' and '"+e+"' are not part of the same object tree");for(var n=Me(t.path),r=Me(e.path),i=0;i<n.length&&n[i]===r[i];i++);return n.slice(i).map(te).join("/")+Fe(r.slice(i))}function ne(t,e,n){return void 0===n&&(n=!0),re(t,Me(e),n)}function re(t,e,n){void 0===n&&(n=!0);for(var r=t,i=0;i<e.length;i++){var o=e[i];if(".."===o){if(r=r.parent)continue}else{if("."===o)continue;if(r){if(r instanceof it)try{var a=r.value;Bt(a)&&(r=qt(a))}catch(s){if(!n)return;throw s}if(r instanceof st)if(r.getChildType(o)&&(r=r.getChildNode(o)))continue}}if(n)throw ce("Could not resolve '"+o+"' in path '"+(Fe(e.slice(0,i))||"/")+"' while resolving '"+Fe(e)+"'");return}return r}function ie(t){if(!t)return ae;var e=Object.keys(t);if(!e.length)return ae;var n=new Array(e.length);return e.forEach((function(e,r){n[r]=t[e]})),n}function oe(t){return Se("process","`process()` has been renamed to `flow()`. See https://github.com/mobxjs/mobx-state-tree/issues/399 for more information. Note that the middleware event types starting with `process` now start with `flow`."),Ee(t)}var ae=Object.freeze([]),se=Object.freeze({}),ue="string"===typeof i.$mobx?{deep:!1}:{deep:!1,proxy:!1};function ce(t){return void 0===t&&(t="Illegal state"),new Error("[mobx-state-tree] "+t)}function pe(t){return t}Object.freeze(ue);var fe=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t};function he(t){return Array.isArray(t)||Object(i.isObservableArray)(t)}function le(t){return t?he(t)?t:[t]:ae}function de(t){if(null===t||"object"!==typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function ye(t){return null!==t&&"object"===typeof t&&!(t instanceof Date)&&!(t instanceof RegExp)}function ve(t,e){return void 0===e&&(e=!0),null===t||void 0===t||!!("string"===typeof t||"number"===typeof t||"boolean"===typeof t||e&&t instanceof Date)}function be(t){return t}function ge(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}var me=function(){function t(){this.handlers=[]}return Object.defineProperty(t.prototype,"hasSubscribers",{get:function(){return this.handlers.length>0},enumerable:!1,configurable:!0}),t.prototype.register=function(t,e){var n=this;return void 0===e&&(e=!1),e?this.handlers.unshift(t):this.handlers.push(t),function(){n.unregister(t)}},t.prototype.has=function(t){return this.handlers.indexOf(t)>=0},t.prototype.unregister=function(t){var e=this.handlers.indexOf(t);e>=0&&this.handlers.splice(e,1)},t.prototype.clear=function(){this.handlers.length=0},t.prototype.emit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.handlers.slice();n.forEach((function(e){return e.apply(void 0,v(t))}))},t}(),we=function(){function t(){}return t.prototype.hasSubscribers=function(t){var e=this.eventHandlers&&this.eventHandlers[t];return!!e&&e.hasSubscribers},t.prototype.register=function(t,e,n){void 0===n&&(n=!1),this.eventHandlers||(this.eventHandlers={});var r=this.eventHandlers[t];return r||(r=this.eventHandlers[t]=new me),r.register(e,n)},t.prototype.has=function(t,e){var n=this.eventHandlers&&this.eventHandlers[t];return!!n&&n.has(e)},t.prototype.unregister=function(t,e){var n=this.eventHandlers&&this.eventHandlers[t];n&&n.unregister(e)},t.prototype.clear=function(t){this.eventHandlers&&delete this.eventHandlers[t]},t.prototype.clearAll=function(){this.eventHandlers=void 0},t.prototype.emit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.eventHandlers&&this.eventHandlers[t];i&&(e=i).emit.apply(e,v(n))},t}();function _e(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}function Pe(t,e){return 0===t.indexOf(e)}var Se=function(t,e){};function Ae(t){console.warn(new Error("[mobx-state-tree] "+t))}function Ie(t,e,n,r){0}function Te(t,e){Ie()}function Oe(t,e,n,r){Ie(),void 0!==n&&Ie(),void 0!==r&&Ie()}function Ce(t,e,n){void 0===n&&(n=!0),Ie(),n||Ie()}function je(t){"function"===typeof queueMicrotask?queueMicrotask(t):"function"===typeof setImmediate?setImmediate(t):setTimeout(t,1)}function Ee(t){return function(t,e){var n=function(){var r=It(),i=At();if(!i)throw ce("a mst flow must always have a parent context");var o=Ot(i);if(!o)throw ce("a mst flow must always have a parent action context");var a={name:t,id:r,tree:i.tree,context:i.context,parentId:i.id,allParentIds:v(i.allParentIds,[i.id]),rootId:i.rootId,parentEvent:i,parentActionEvent:o},s=arguments;function u(t,e,r){t.$mst_middleware=n.$mst_middleware,Tt(f(f({},a),{type:e,args:[r]}),t)}return new Promise((function(t,r){var i,o=function(){i=e.apply(null,arguments),c(void 0)};function c(t){var e;try{u((function(t){e=i.next(t)}),"flow_resume",t)}catch(n){return void je((function(){u((function(t){r(n)}),"flow_throw",n)}))}h(e)}function p(t){var e;try{u((function(t){e=i.throw(t)}),"flow_resume_error",t)}catch(n){return void je((function(){u((function(t){r(n)}),"flow_throw",n)}))}h(e)}function h(e){if(!e.done){if(!e.value||"function"!==typeof e.value.then)throw ce("Only promises can be yielded to `async`, got: "+e);return e.value.then(c,p)}je((function(){u((function(e){t(e)}),"flow_return",e.value)}))}o.$mst_middleware=n.$mst_middleware,Tt(f(f({},a),{type:"flow_spawn",args:_e(s)}),o)}))};return n}(t.name,t)}function Ve(t){return t}function Ne(t){return function(){var e,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];return l(this,(function(e){switch(e.label){case 0:return[4,t.apply(void 0,v(n))];case 1:return[2,e.sent()]}}))}}function De(t){return l(this,(function(e){switch(e.label){case 0:return[4,t];case 1:return[2,e.sent()]}}))}function xe(t){switch(t.op){case"add":return{op:"add",path:t.path,value:t.value};case"remove":return{op:"remove",path:t.path};case"replace":return{op:"replace",path:t.path,value:t.value}}}function ke(t){switch(t.op){case"add":return{op:"remove",path:t.path};case"remove":return{op:"add",path:t.path,value:t.oldValue};case"replace":return{op:"replace",path:t.path,value:t.oldValue}}}function Re(t){return!0===("number"===typeof t)?""+t:-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function ze(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Fe(t){if(0===t.length)return"";var e=function(t){return t.map(Re).join("/")};return"."===t[0]||".."===t[0]?e(t):"/"+e(t)}function Me(t){var e=t.split("/").map(ze);if(!(""===t||"."===t||".."===t||Pe(t,"/")||Pe(t,"./")||Pe(t,"../")))throw ce("a json path must be either rooted, empty or relative, but got '"+t+"'");return""===e[0]&&e.shift(),e}Se.ids={};var He=function(t){function e(e,n,r){var i=t.call(this,r||e.name)||this;return i._subtype=e,i._processors=n,i}return p(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return this._subtype.flags|nt.SnapshotProcessor},enumerable:!1,configurable:!0}),e.prototype.describe=function(){return"snapshotProcessor("+this._subtype.describe()+")"},e.prototype.preProcessSnapshot=function(t){return this._processors.preProcessor?this._processors.preProcessor.call(null,t):t},e.prototype.postProcessSnapshot=function(t){return this._processors.postProcessor?this._processors.postProcessor.call(null,t):t},e.prototype._fixNode=function(t){var e=this;!function(t,e){for(var n,r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];try{for(var a=d(i),s=a.next();!s.done;s=a.next()){var u=s.value;t[u]=e[u].bind(e)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}(t.type,this,"isAssignableFrom","create");var n=t.getSnapshot;t.getSnapshot=function(){return e.postProcessSnapshot(n.call(t))}},e.prototype.instantiate=function(t,e,n,r){var i=Bt(r)?r:this.preProcessSnapshot(r),o=this._subtype.instantiate(t,e,n,i);return this._fixNode(o),o},e.prototype.reconcile=function(t,e,n,r){var i=this._subtype.reconcile(t,Bt(e)?e:this.preProcessSnapshot(e),n,r);return i!==t&&this._fixNode(i),i},e.prototype.getSnapshot=function(t,e){void 0===e&&(e=!0);var n=this._subtype.getSnapshot(t);return e?this.postProcessSnapshot(n):n},e.prototype.isValidSnapshot=function(t,e){var n=this.preProcessSnapshot(t);return this._subtype.validate(n,e)},e.prototype.getSubTypes=function(){return this._subtype},e.prototype.is=function(t){var e=ht(t)?this._subtype:Bt(t)?O(t,!1):this.preProcessSnapshot(t);return 0===this._subtype.validate(e,[{path:"",type:this._subtype}]).length},e}(ct);var Le,Ue="Map.put can only be used to store complex values that have an identifier type attribute";function $e(t,e){var n,r,i=t.getSubTypes();if(i===ut)return!1;if(i){var o=le(i);try{for(var a=d(o),s=a.next();!s.done;s=a.next()){if(!$e(s.value,e))return!1}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}return t instanceof rn&&e.push(t),!0}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO"}(Le||(Le={}));var We=function(t){function e(e){return t.call(this,e,i.observable.ref.enhancer)||this}return p(e,t),e.prototype.get=function(e){return t.prototype.get.call(this,""+e)},e.prototype.has=function(e){return t.prototype.has.call(this,""+e)},e.prototype.delete=function(e){return t.prototype.delete.call(this,""+e)},e.prototype.set=function(e,n){return t.prototype.set.call(this,""+e,n)},e.prototype.put=function(t){if(!t)throw ce("Map.put cannot be used to set empty values");if(Bt(t)){var e=qt(t);if(null===e.identifier)throw ce(Ue);return this.set(e.identifier,t),t}if(ye(t)){var n=qt(this),r=n.type;if(r.identifierMode!==Le.YES)throw ce(Ue);var i=t[r.mapIdentifierAttribute];if(!Kn(i)){var o=this.put(r.getChildType().create(t,n.environment));return this.put(O(o))}var a=Bn(i);return this.set(a,t),this.get(a)}throw ce("Map.put can only be used to store complex values")},e}(i.ObservableMap),Ge=function(t){function e(e,n,r){void 0===r&&(r=[]);var i=t.call(this,e)||this;return i._subType=n,i.identifierMode=Le.UNKNOWN,i.mapIdentifierAttribute=void 0,i.flags=nt.Map,i.hookInitializers=[],i._determineIdentifierMode(),i.hookInitializers=r,i}return p(e,t),e.prototype.hooks=function(t){var n=this.hookInitializers.length>0?this.hookInitializers.concat(t):[t];return new e(this.name,this._subType,n)},e.prototype.instantiate=function(t,e,n,r){return this._determineIdentifierMode(),Yt(this,t,e,n,r)},e.prototype._determineIdentifierMode=function(){if(this.identifierMode===Le.UNKNOWN){var t=[];if($e(this._subType,t)){var e=void 0;t.forEach((function(t){if(t.identifierAttribute){if(e&&e!==t.identifierAttribute)throw ce("The objects in a map should all have the same identifier attribute, expected '"+e+"', but child of type '"+t.name+"' declared attribute '"+t.identifierAttribute+"' as identifier");e=t.identifierAttribute}})),e?(this.identifierMode=Le.YES,this.mapIdentifierAttribute=e):this.identifierMode=Le.NO}}},e.prototype.initializeChildNodes=function(t,e){void 0===e&&(e={});var n=t.type._subType,r={};return Object.keys(e).forEach((function(i){r[i]=n.instantiate(t,i,void 0,e[i])})),r},e.prototype.createNewInstance=function(t){return new We(t)},e.prototype.finalizeNewInstance=function(t,e){Object(i._interceptReads)(e,t.unbox),t.type.hookInitializers.forEach((function(t){var n=t(e);Object.keys(n).forEach((function(t){var r=n[t],i=Ct(e,t,r);ge(e,t,i)}))})),Object(i.intercept)(e,this.willChange),Object(i.observe)(e,this.didChange)},e.prototype.describe=function(){return"Map<string, "+this._subType.describe()+">"},e.prototype.getChildren=function(t){return Object(i.values)(t.storedValue)},e.prototype.getChildNode=function(t,e){var n=t.storedValue.get(""+e);if(!n)throw ce("Not a child "+e);return n},e.prototype.willChange=function(t){var e=qt(t.object),n=t.name;e.assertWritable({subpath:n});var r=e.type,i=r._subType;switch(t.type){case"update":var o=t.newValue;if(o===t.object.get(n))return null;Ut(i,o),t.newValue=i.reconcile(e.getChildNode(n),t.newValue,e,n),r.processIdentifier(n,t.newValue);break;case"add":Ut(i,t.newValue),t.newValue=i.instantiate(e,n,void 0,t.newValue),r.processIdentifier(n,t.newValue)}return t},e.prototype.processIdentifier=function(t,e){if(this.identifierMode===Le.YES&&e instanceof st){var n=e.identifier;if(n!==t)throw ce("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+n+"', but expected: '"+t+"'")}},e.prototype.getSnapshot=function(t){var e={};return t.getChildren().forEach((function(t){e[t.subpath]=t.snapshot})),e},e.prototype.processInitialSnapshot=function(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n].getSnapshot()})),e},e.prototype.didChange=function(t){var e=qt(t.object);switch(t.type){case"update":return void e.emitPatch({op:"replace",path:Re(t.name),value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},e);case"add":return void e.emitPatch({op:"add",path:Re(t.name),value:t.newValue.snapshot,oldValue:void 0},e);case"delete":var n=t.oldValue.snapshot;return t.oldValue.die(),void e.emitPatch({op:"remove",path:Re(t.name),oldValue:n},e)}},e.prototype.applyPatchLocally=function(t,e,n){var r=t.storedValue;switch(n.op){case"add":case"replace":r.set(e,n.value);break;case"remove":r.delete(e)}},e.prototype.applySnapshot=function(t,e){Ut(this,e);var n=t.storedValue,r={};if(Array.from(n.keys()).forEach((function(t){r[t]=!1})),e)for(var i in e)n.set(i,e[i]),r[""+i]=!0;Object.keys(r).forEach((function(t){!1===r[t]&&n.delete(t)}))},e.prototype.getChildType=function(){return this._subType},e.prototype.isValidSnapshot=function(t,e){var n=this;return de(t)?Lt(Object.keys(t).map((function(r){return n._subType.validate(t[r],Ft(e,r,n._subType))}))):Ht(e,t,"Value is not a plain object")},e.prototype.getDefaultSnapshot=function(){return se},e.prototype.removeChild=function(t,e){t.storedValue.delete(e)},h([i.action],e.prototype,"applySnapshot",null),e}(pt);function Je(t){return ht(t)&&(t.flags&nt.Map)>0}var Ye=function(t){function e(e,n,r){void 0===r&&(r=[]);var i=t.call(this,e)||this;return i._subType=n,i.flags=nt.Array,i.hookInitializers=[],i.hookInitializers=r,i}return p(e,t),e.prototype.hooks=function(t){var n=this.hookInitializers.length>0?this.hookInitializers.concat(t):[t];return new e(this.name,this._subType,n)},e.prototype.instantiate=function(t,e,n,r){return Yt(this,t,e,n,r)},e.prototype.initializeChildNodes=function(t,e){void 0===e&&(e=[]);var n=t.type._subType,r={};return e.forEach((function(e,i){var o=""+i;r[o]=n.instantiate(t,o,void 0,e)})),r},e.prototype.createNewInstance=function(t){return i.observable.array(ie(t),ue)},e.prototype.finalizeNewInstance=function(t,e){Object(i._getAdministration)(e).dehancer=t.unbox,t.type.hookInitializers.forEach((function(t){var n=t(e);Object.keys(n).forEach((function(t){var r=n[t],i=Ct(e,t,r);ge(e,t,i)}))})),Object(i.intercept)(e,this.willChange),Object(i.observe)(e,this.didChange)},e.prototype.describe=function(){return this._subType.describe()+"[]"},e.prototype.getChildren=function(t){return t.storedValue.slice()},e.prototype.getChildNode=function(t,e){var n=Number(e);if(n<t.storedValue.length)return t.storedValue[n];throw ce("Not a child: "+e)},e.prototype.willChange=function(t){var e=qt(t.object);e.assertWritable({subpath:""+t.index});var n=e.type._subType,r=e.getChildren();switch(t.type){case"update":if(t.newValue===t.object[t.index])return null;var i=Ze(e,n,[r[t.index]],[t.newValue],[t.index]);if(!i)return null;t.newValue=i[0];break;case"splice":var o=t.index,a=t.removedCount,s=t.added,u=Ze(e,n,r.slice(o,o+a),s,s.map((function(t,e){return o+e})));if(!u)return null;t.added=u;for(var c=o+a;c<r.length;c++)r[c].setParent(e,""+(c+s.length-a))}return t},e.prototype.getSnapshot=function(t){return t.getChildren().map((function(t){return t.snapshot}))},e.prototype.processInitialSnapshot=function(t){var e=[];return Object.keys(t).forEach((function(n){e.push(t[n].getSnapshot())})),e},e.prototype.didChange=function(t){var e=qt(t.object);switch(t.type){case"update":return void e.emitPatch({op:"replace",path:""+t.index,value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},e);case"splice":for(var n=t.removedCount-1;n>=0;n--)e.emitPatch({op:"remove",path:""+(t.index+n),oldValue:t.removed[n].snapshot},e);for(n=0;n<t.addedCount;n++)e.emitPatch({op:"add",path:""+(t.index+n),value:e.getChildNode(""+(t.index+n)).snapshot,oldValue:void 0},e);return}},e.prototype.applyPatchLocally=function(t,e,n){var r=t.storedValue,i="-"===e?r.length:Number(e);switch(n.op){case"replace":r[i]=n.value;break;case"add":r.splice(i,0,n.value);break;case"remove":r.splice(i,1)}},e.prototype.applySnapshot=function(t,e){Ut(this,e),t.storedValue.replace(e)},e.prototype.getChildType=function(){return this._subType},e.prototype.isValidSnapshot=function(t,e){var n=this;return he(t)?Lt(t.map((function(t,r){return n._subType.validate(t,Ft(e,""+r,n._subType))}))):Ht(e,t,"Value is not an array")},e.prototype.getDefaultSnapshot=function(){return ae},e.prototype.removeChild=function(t,e){t.storedValue.splice(Number(e),1)},h([i.action],e.prototype,"applySnapshot",null),e}(pt);function Ze(t,e,n,r,i){for(var o,a=!0,s=0;;s++){var u=s<=r.length-1,c=n[s],p=u?r[s]:void 0,f=""+i[s];if(((o=p)instanceof it||o instanceof st)&&(p=p.storedValue),!c&&!u)break;if(u)if(c)if(Ke(c,p))n[s]=Be(e,t,f,p,c);else{for(var h=void 0,l=s;l<n.length;l++)if(Ke(n[l],p)){h=n.splice(l,1)[0];break}a=!1;d=Be(e,t,f,p,h);n.splice(s,0,d)}else{if(Bt(p)&&qt(p).parent===t)throw ce("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+t.path+"/"+f+"', but it lives already at '"+qt(p).path+"'");a=!1;var d=Be(e,t,f,p);n.splice(s,0,d)}else a=!1,n.splice(s,1),c instanceof st&&c.createObservableInstanceIfNeeded(),c.die(),s--}return a?null:n}function Be(t,e,n,r,i){Ut(t,r);var o=function(){if(Bt(r)){var o=qt(r);if(o.assertAlive(se),null!==o.parent&&o.parent===e)return o.setParent(e,n),o}return i?t.reconcile(i,r,e,n):t.instantiate(e,n,void 0,r)}();return i&&i!==o&&(i instanceof st&&i.createObservableInstanceIfNeeded(),i.die()),o}function Ke(t,e){if(!t.isAlive)return!1;if(Bt(e)){var n=qt(e);return n.isAlive&&n===t}return t.snapshot===e||t instanceof st&&null!==t.identifier&&t.identifierAttribute&&de(e)&&t.identifier===Bn(e[t.identifierAttribute])&&t.type.is(e)}function qe(t){return ht(t)&&(t.flags&nt.Array)>0}var Qe="preProcessSnapshot",Xe="postProcessSnapshot";function tn(){return qt(this).toString()}var en={name:"AnonymousModel",properties:{},initializers:ae};function nn(t){return Object.keys(t).reduce((function(t,e){var n,i,o;if(e in r)throw ce("Hook '"+e+"' was defined as property. Hooks should be defined as part of the actions");var a=Object.getOwnPropertyDescriptor(t,e);if("get"in a)throw ce("Getters are not supported as properties. Please use views instead");var s=a.value;if(null===s||void 0===s)throw ce("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(ve(s))return Object.assign({},t,((n={})[e]=In(function(t){switch(typeof t){case"string":return sn;case"number":return un;case"boolean":return pn;case"object":if(t instanceof Date)return dn}throw ce("Cannot determine primitive type from value "+t)}(s),s),n));if(s instanceof Ge)return Object.assign({},t,((i={})[e]=In(s,{}),i));if(s instanceof Ye)return Object.assign({},t,((o={})[e]=In(s,[]),o));if(ht(s))return t;throw ce("Invalid type definition for property '"+e+"', cannot infer a type from a value like '"+s+"' ("+typeof s+")")}),t)}var rn=function(t){function e(e){var n=t.call(this,e.name||en.name)||this;return n.flags=nt.Object,n.named=function(t){return n.cloneAndEnhance({name:t})},n.props=function(t){return n.cloneAndEnhance({properties:t})},n.preProcessSnapshot=function(t){var e=n.preProcessor;return e?n.cloneAndEnhance({preProcessor:function(n){return e(t(n))}}):n.cloneAndEnhance({preProcessor:t})},n.postProcessSnapshot=function(t){var e=n.postProcessor;return e?n.cloneAndEnhance({postProcessor:function(n){return t(e(n))}}):n.cloneAndEnhance({postProcessor:t})},Object.assign(n,en,e),n.properties=nn(n.properties),n.properties,n.propertyNames=Object.keys(n.properties),n.identifierAttribute=n._getIdentifierAttribute(),n}return p(e,t),e.prototype._getIdentifierAttribute=function(){var t=void 0;return this.forAllProps((function(e,n){if(n.flags&nt.Identifier){if(t)throw ce("Cannot define property '"+e+"' as object identifier, property '"+t+"' is already defined as identifier property");t=e}})),t},e.prototype.cloneAndEnhance=function(t){return new e({name:t.name||this.name,properties:Object.assign({},this.properties,t.properties),initializers:this.initializers.concat(t.initializers||[]),preProcessor:t.preProcessor||this.preProcessor,postProcessor:t.postProcessor||this.postProcessor})},e.prototype.actions=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){return e.instantiateActions(n,t(n)),n}]})},e.prototype.instantiateActions=function(t,e){if(!de(e))throw ce("actions initializer should return a plain object containing actions");Object.keys(e).forEach((function(n){if(n===Qe)throw ce("Cannot define action 'preProcessSnapshot', it should be defined using 'type.preProcessSnapshot(fn)' instead");if(n===Xe)throw ce("Cannot define action 'postProcessSnapshot', it should be defined using 'type.postProcessSnapshot(fn)' instead");var i=e[n],o=t[n];if(n in r&&o){var a=i;i=function(){o.apply(null,arguments),a.apply(null,arguments)}}var s=i.$mst_middleware,u=i.bind(e);u.$mst_middleware=s;var c=Ct(t,n,u);e[n]=c,ge(t,n,c)}))},e.prototype.volatile=function(t){var e=this;if("function"!==typeof t)throw ce("You passed an "+typeof t+" to volatile state as an argument, when function is expected");return this.cloneAndEnhance({initializers:[function(n){return e.instantiateVolatileState(n,t(n)),n}]})},e.prototype.instantiateVolatileState=function(t,e){if(!de(e))throw ce("volatile state initializer should return a plain object containing state");Object(i.set)(t,e)},e.prototype.extend=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){var r=t(n),i=r.actions,o=r.views,a=r.state,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(r,["actions","views","state"]);for(var u in s)throw ce("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+u+"'");return a&&e.instantiateVolatileState(n,a),o&&e.instantiateViews(n,o),i&&e.instantiateActions(n,i),n}]})},e.prototype.views=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){return e.instantiateViews(n,t(n)),n}]})},e.prototype.instantiateViews=function(t,e){if(!de(e))throw ce("views initializer should return a plain object containing views");Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);if("get"in r)if(Object(i.isComputedProp)(t,n)){var o=Object(i._getAdministration)(t,n);o.derivation=r.get,o.scope=t,r.set&&(o.setter=Object(i.action)(o.name+"-setter",r.set))}else Object(i.computed)(t,n,r,!0);else{if("function"!==typeof r.value)throw ce("A view member should either be a function or getter based property");ge(t,n,r.value)}}))},e.prototype.instantiate=function(t,e,n,r){return Yt(this,t,e,n,Bt(r)?r:this.applySnapshotPreProcessor(r))},e.prototype.initializeChildNodes=function(t,e){void 0===e&&(e={});var n=t.type,r={};return n.forAllProps((function(n,i){r[n]=i.instantiate(t,n,void 0,e[n])})),r},e.prototype.createNewInstance=function(t){return i.observable.object(t,se,ue)},e.prototype.finalizeNewInstance=function(t,e){ge(e,"toString",tn),this.forAllProps((function(n){Object(i._interceptReads)(e,n,t.unbox)})),this.initializers.reduce((function(t,e){return e(t)}),e),Object(i.intercept)(e,this.willChange),Object(i.observe)(e,this.didChange)},e.prototype.willChange=function(t){var e=t,n=qt(e.object),r=e.name;n.assertWritable({subpath:r});var i=n.type.properties[r];return i&&(Ut(i,e.newValue),e.newValue=i.reconcile(n.getChildNode(r),e.newValue,n,r)),e},e.prototype.didChange=function(t){var e=t,n=qt(e.object);if(n.type.properties[e.name]){var r=e.oldValue?e.oldValue.snapshot:void 0;n.emitPatch({op:"replace",path:Re(e.name),value:e.newValue.snapshot,oldValue:r},n)}},e.prototype.getChildren=function(t){var e=this,n=[];return this.forAllProps((function(r){n.push(e.getChildNode(t,r))})),n},e.prototype.getChildNode=function(t,e){if(!(e in this.properties))throw ce("Not a value property: "+e);var n=Object(i._getAdministration)(t.storedValue,e).value;if(!n)throw ce("Node not available for property "+e);return n},e.prototype.getSnapshot=function(t,e){var n=this;void 0===e&&(e=!0);var r={};return this.forAllProps((function(e,o){Object(i.getAtom)(t.storedValue,e).reportObserved(),r[e]=n.getChildNode(t,e).snapshot})),e?this.applySnapshotPostProcessor(r):r},e.prototype.processInitialSnapshot=function(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n].getSnapshot()})),this.applySnapshotPostProcessor(e)},e.prototype.applyPatchLocally=function(t,e,n){if("replace"!==n.op&&"add"!==n.op)throw ce("object does not support operation "+n.op);t.storedValue[e]=n.value},e.prototype.applySnapshot=function(t,e){var n=this.applySnapshotPreProcessor(e);Ut(this,n),this.forAllProps((function(e){t.storedValue[e]=n[e]}))},e.prototype.applySnapshotPreProcessor=function(t){var e=this.preProcessor;return e?e.call(null,t):t},e.prototype.applySnapshotPostProcessor=function(t){var e=this.postProcessor;return e?e.call(null,t):t},e.prototype.getChildType=function(t){return Ce(),this.properties[t]},e.prototype.isValidSnapshot=function(t,e){var n=this,r=this.applySnapshotPreProcessor(t);return de(r)?Lt(this.propertyNames.map((function(t){return n.properties[t].validate(r[t],Ft(e,t,n.properties[t]))}))):Ht(e,r,"Value is not a plain object")},e.prototype.forAllProps=function(t){var e=this;this.propertyNames.forEach((function(n){return t(n,e.properties[n])}))},e.prototype.describe=function(){var t=this;return"{ "+this.propertyNames.map((function(e){return e+": "+t.properties[e].describe()})).join("; ")+" }"},e.prototype.getDefaultSnapshot=function(){return se},e.prototype.removeChild=function(t,e){t.storedValue[e]=void 0},h([i.action],e.prototype,"applySnapshot",null),e}(pt);function on(t){return ht(t)&&(t.flags&nt.Object)>0}var an=function(t){function e(e,n,r,i){void 0===i&&(i=pe);var o=t.call(this,e)||this;return o.flags=n,o.checker=r,o.initializer=i,o.flags=n,o}return p(e,t),e.prototype.describe=function(){return this.name},e.prototype.instantiate=function(t,e,n,r){return Zt(this,t,e,n,r)},e.prototype.createNewInstance=function(t){return this.initializer(t)},e.prototype.isValidSnapshot=function(t,e){return ve(t)&&this.checker(t)?Mt():Ht(e,t,"Value is not a "+("Date"===this.name?"Date or a unix milliseconds timestamp":this.name))},e}(ft),sn=new an("string",nt.String,(function(t){return"string"===typeof t})),un=new an("number",nt.Number,(function(t){return"number"===typeof t})),cn=new an("integer",nt.Integer,(function(t){return fe(t)})),pn=new an("boolean",nt.Boolean,(function(t){return"boolean"===typeof t})),fn=new an("null",nt.Null,(function(t){return null===t})),hn=new an("undefined",nt.Undefined,(function(t){return void 0===t})),ln=new an("Date",nt.Date,(function(t){return"number"===typeof t||t instanceof Date}),(function(t){return t instanceof Date?t:new Date(t)}));ln.getSnapshot=function(t){return t.storedValue.getTime()};var dn=ln;function yn(t){return ht(t)&&(t.flags&(nt.String|nt.Number|nt.Integer|nt.Boolean|nt.Date))>0}var vn=function(t){function e(e){var n=t.call(this,JSON.stringify(e))||this;return n.flags=nt.Literal,n.value=e,n}return p(e,t),e.prototype.instantiate=function(t,e,n,r){return Zt(this,t,e,n,r)},e.prototype.describe=function(){return JSON.stringify(this.value)},e.prototype.isValidSnapshot=function(t,e){return ve(t)&&t===this.value?Mt():Ht(e,t,"Value is not a literal "+JSON.stringify(this.value))},e}(ft);function bn(t){return Ie(),new vn(t)}function gn(t){return ht(t)&&(t.flags&nt.Literal)>0}var mn=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._subtype=n,o._predicate=r,o._message=i,o}return p(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return this._subtype.flags|nt.Refinement},enumerable:!1,configurable:!0}),e.prototype.describe=function(){return this.name},e.prototype.instantiate=function(t,e,n,r){return this._subtype.instantiate(t,e,n,r)},e.prototype.isAssignableFrom=function(t){return this._subtype.isAssignableFrom(t)},e.prototype.isValidSnapshot=function(t,e){var n=this._subtype.validate(t,e);if(n.length>0)return n;var r=Bt(t)?qt(t).snapshot:t;return this._predicate(r)?Mt():Ht(e,t,this._message(t))},e.prototype.reconcile=function(t,e,n,r){return this._subtype.reconcile(t,e,n,r)},e.prototype.getSubTypes=function(){return this._subtype},e}(ct);function wn(t){return(t.flags&nt.Refinement)>0}var _n=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i._types=n,i._eager=!0,r=f({eager:!0,dispatcher:void 0},r),i._dispatcher=r.dispatcher,r.eager||(i._eager=!1),i}return p(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){var t=nt.Union;return this._types.forEach((function(e){t|=e.flags})),t},enumerable:!1,configurable:!0}),e.prototype.isAssignableFrom=function(t){return this._types.some((function(e){return e.isAssignableFrom(t)}))},e.prototype.describe=function(){return"("+this._types.map((function(t){return t.describe()})).join(" | ")+")"},e.prototype.instantiate=function(t,e,n,r){var i=this.determineType(r,void 0);if(!i)throw ce("No matching type for union "+this.describe());return i.instantiate(t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){var i=this.determineType(e,t.type);if(!i)throw ce("No matching type for union "+this.describe());return i.reconcile(t,e,n,r)},e.prototype.determineType=function(t,e){return this._dispatcher?this._dispatcher(t):e?e.is(t)?e:this._types.filter((function(t){return t!==e})).find((function(e){return e.is(t)})):this._types.find((function(e){return e.is(t)}))},e.prototype.isValidSnapshot=function(t,e){if(this._dispatcher)return this._dispatcher(t).validate(t,e);for(var n=[],r=0,i=0;i<this._types.length;i++){var o=this._types[i].validate(t,e);if(0===o.length){if(this._eager)return Mt();r++}else n.push(o)}return 1===r?Mt():Ht(e,t,"No type is applicable for the union").concat(Lt(n))},e.prototype.getSubTypes=function(){return this._types},e}(ct);function Pn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=ht(t)?void 0:t,i=ht(t)?v([t],e):e,o="("+i.map((function(t){return t.name})).join(" | ")+")";return new _n(o,i,r)}function Sn(t){return(t.flags&nt.Union)>0}var An=function(t){function e(e,n,r){var i=t.call(this,e.name)||this;return i._subtype=e,i._defaultValue=n,i.optionalValues=r,i}return p(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return this._subtype.flags|nt.Optional},enumerable:!1,configurable:!0}),e.prototype.describe=function(){return this._subtype.describe()+"?"},e.prototype.instantiate=function(t,e,n,r){if(this.optionalValues.indexOf(r)>=0){var i=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(t,e,n,i)}return this._subtype.instantiate(t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){return this._subtype.reconcile(t,this.optionalValues.indexOf(e)<0&&this._subtype.is(e)?e:this.getDefaultInstanceOrSnapshot(),n,r)},e.prototype.getDefaultInstanceOrSnapshot=function(){var t="function"===typeof this._defaultValue?this._defaultValue():this._defaultValue;return"function"===typeof this._defaultValue&&Ut(this,t),t},e.prototype.isValidSnapshot=function(t,e){return this.optionalValues.indexOf(t)>=0?Mt():this._subtype.validate(t,e)},e.prototype.isAssignableFrom=function(t){return this._subtype.isAssignableFrom(t)},e.prototype.getSubTypes=function(){return this._subtype},e}(ct);function In(t,e,n){return function(t,e){if("function"!==typeof e&&Bt(e))throw ce("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead");lt(t,1)}(t,e),new An(t,e,n||Tn)}var Tn=[void 0];function On(t){return ht(t)&&(t.flags&nt.Optional)>0}var Cn=In(hn,void 0),jn=In(fn,null);function En(t){return lt(t,1),Pn(t,Cn)}var Vn=function(t){function e(e,n){var r=t.call(this,e)||this;return r._definition=n,r}return p(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|nt.Late},enumerable:!1,configurable:!0}),e.prototype.getSubType=function(t){if(!this._subType){var e=void 0;try{e=this._definition()}catch(n){if(!(n instanceof ReferenceError))throw n;e=void 0}if(t&&void 0===e)throw ce("Late type seems to be used too early, the definition (still) returns undefined");e&&(this._subType=e)}return this._subType},e.prototype.instantiate=function(t,e,n,r){return this.getSubType(!0).instantiate(t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){return this.getSubType(!0).reconcile(t,e,n,r)},e.prototype.describe=function(){var t=this.getSubType(!1);return t?t.name:"<uknown late type>"},e.prototype.isValidSnapshot=function(t,e){var n=this.getSubType(!1);return n?n.validate(t,e):Mt()},e.prototype.isAssignableFrom=function(t){var e=this.getSubType(!1);return!!e&&e.isAssignableFrom(t)},e.prototype.getSubTypes=function(){var t=this.getSubType(!1);return t||ut},e}(ct);function Nn(t){return ht(t)&&(t.flags&nt.Late)>0}var Dn=function(t){function e(e){var n=t.call(this,e?"frozen("+e.name+")":"frozen")||this;return n.subType=e,n.flags=nt.Frozen,n}return p(e,t),e.prototype.describe=function(){return"<any immutable value>"},e.prototype.instantiate=function(t,e,n,r){return Zt(this,t,e,n,r)},e.prototype.isValidSnapshot=function(t,e){return function(t){return"function"!==typeof t}(t)?this.subType?this.subType.validate(t,e):Mt():Ht(e,t,"Value is not serializable and cannot be frozen")},e}(ft),xn=new Dn;function kn(t){return ht(t)&&(t.flags&nt.Frozen)>0}var Rn=function(){function t(t,e){if(this.targetType=e,Kn(t))this.identifier=t;else{if(!Bt(t))throw ce("Can only store references to tree nodes or identifiers, got: '"+t+"'");var n=qt(t);if(!n.identifierAttribute)throw ce("Can only store references with a defined identifier attribute.");var r=n.unnormalizedIdentifier;if(null===r||void 0===r)throw ce("Can only store references to tree nodes with a defined identifier.");this.identifier=r}}return t.prototype.updateResolvedReference=function(t){var e=Bn(this.identifier),n=t.root,r=n.identifierCache.getLastCacheModificationPerId(e);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==r){var i=this.targetType,o=n.identifierCache.resolve(i,e);if(!o)throw new zn("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+t.path+")");this.resolvedReference={node:o,lastCacheModification:r}}},Object.defineProperty(t.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),t}(),zn=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return p(e,t),e}(Error),Fn=function(t){function e(e,n){var r=t.call(this,"reference("+e.name+")")||this;return r.targetType=e,r.onInvalidated=n,r.flags=nt.Reference,r}return p(e,t),e.prototype.describe=function(){return this.name},e.prototype.isAssignableFrom=function(t){return this.targetType.isAssignableFrom(t)},e.prototype.isValidSnapshot=function(t,e){return Kn(t)?Mt():Ht(e,t,"Value is not a valid identifier, which is a string or a number")},e.prototype.fireInvalidated=function(t,e,n,r){var i=e.parent;if(i&&i.isAlive){var o=i.storedValue;o&&this.onInvalidated({cause:t,parent:o,invalidTarget:r?r.storedValue:void 0,invalidId:n,replaceRef:function(t){_(e.root.storedValue,{op:"replace",value:t,path:e.path})},removeRef:function(){on(i.type)?this.replaceRef(void 0):_(e.root.storedValue,{op:"remove",path:e.path})}})}},e.prototype.addTargetNodeWatcher=function(t,e){var n=this,i=this.getValue(t);if(i){var o=qt(i),a=function(i,a){var s=function(t){switch(t){case r.beforeDestroy:return"destroy";case r.beforeDetach:return"detach";default:return}}(a);s&&n.fireInvalidated(s,t,e,o)},s=o.registerHook(r.beforeDetach,a),u=o.registerHook(r.beforeDestroy,a);return function(){s(),u()}}},e.prototype.watchTargetNodeForInvalidations=function(t,e,n){var i=this;if(this.onInvalidated){var o;t.registerHook(r.beforeDestroy,(function(){o&&o()}));var a=function(r){o&&o();var a=t.parent,s=a&&a.storedValue;if(a&&a.isAlive&&s){(n?!!n.get(e,s):t.root.identifierCache.has(i.targetType,Bn(e)))?o=i.addTargetNodeWatcher(t,e):r||i.fireInvalidated("invalidSnapshotReference",t,e,null)}};t.state===Wt.FINALIZED?a(!0):(t.isRoot||t.root.registerHook(r.afterCreationFinalization,(function(){t.parent&&t.parent.createObservableInstanceIfNeeded()})),t.registerHook(r.afterAttach,(function(){a(!1)})))}},e}(ft),Mn=function(t){function e(e,n){return t.call(this,e,n)||this}return p(e,t),e.prototype.getValue=function(t){if(t.isAlive)return t.storedValue.resolvedValue},e.prototype.getSnapshot=function(t){return t.storedValue.identifier},e.prototype.instantiate=function(t,e,n,r){var i=Bt(r)?F(r):r,o=new Rn(r,this.targetType),a=Zt(this,t,e,n,o);return o.node=a,this.watchTargetNodeForInvalidations(a,i,void 0),a},e.prototype.reconcile=function(t,e,n,r){if(!t.isDetaching&&t.type===this){var i=Bt(e),o=t.storedValue;if(!i&&o.identifier===e||i&&o.resolvedValue===e)return t.setParent(n,r),t}var a=this.instantiate(n,r,void 0,e);return t.die(),a},e}(Fn),Hn=function(t){function e(e,n,r){var i=t.call(this,e,r)||this;return i.options=n,i}return p(e,t),e.prototype.getValue=function(t){if(t.isAlive)return this.options.get(t.storedValue,t.parent?t.parent.storedValue:null)},e.prototype.getSnapshot=function(t){return t.storedValue},e.prototype.instantiate=function(t,e,n,r){var i=Bt(r)?this.options.set(r,t?t.storedValue:null):r,o=Zt(this,t,e,n,i);return this.watchTargetNodeForInvalidations(o,i,this.options),o},e.prototype.reconcile=function(t,e,n,r){var i=Bt(e)?this.options.set(e,t?t.storedValue:null):e;if(!t.isDetaching&&t.type===this&&t.storedValue===i)return t.setParent(n,r),t;var o=this.instantiate(n,r,void 0,i);return t.die(),o},e}(Fn);function Ln(t,e){lt(t,1);var n=e||void 0,r=e?e.onInvalidated:void 0;return n&&(n.get||n.set)?new Hn(t,{get:n.get,set:n.set},r):new Mn(t,r)}function Un(t){return(t.flags&nt.Reference)>0}var $n=function(t){function e(e,n){var r=t.call(this,e)||this;return r.validType=n,r.flags=nt.Identifier,r}return p(e,t),e.prototype.instantiate=function(t,e,n,r){if(!t||!(t.type instanceof rn))throw ce("Identifier types can only be instantiated as direct child of a model type");return Zt(this,t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){if(t.storedValue!==e)throw ce("Tried to change identifier from '"+t.storedValue+"' to '"+e+"'. Changing identifiers is not allowed.");return t.setParent(n,r),t},e.prototype.isValidSnapshot=function(t,e){return typeof t!==this.validType?Ht(e,t,"Value is not a valid "+this.describe()+", expected a "+this.validType):Mt()},e}(ft),Wn=function(t){function e(){var e=t.call(this,"identifier","string")||this;return e.flags=nt.Identifier,e}return p(e,t),e.prototype.describe=function(){return"identifier"},e}($n),Gn=function(t){function e(){return t.call(this,"identifierNumber","number")||this}return p(e,t),e.prototype.getSnapshot=function(t){return t.storedValue},e.prototype.describe=function(){return"identifierNumber"},e}($n),Jn=new Wn,Yn=new Gn;function Zn(t){return ht(t)&&(t.flags&nt.Identifier)>0}function Bn(t){return""+t}function Kn(t){return"string"===typeof t||"number"===typeof t}var qn=function(t){function e(e){var n=t.call(this,e.name)||this;return n.options=e,n.flags=nt.Custom,n}return p(e,t),e.prototype.describe=function(){return this.name},e.prototype.isValidSnapshot=function(t,e){if(this.options.isTargetType(t))return Mt();var n=this.options.getValidationMessage(t);return n?Ht(e,t,"Invalid value for type '"+this.name+"': "+n):Mt()},e.prototype.getSnapshot=function(t){return this.options.toSnapshot(t.storedValue)},e.prototype.instantiate=function(t,e,n,r){return Zt(this,t,e,n,this.options.isTargetType(r)?r:this.options.fromSnapshot(r,t&&t.root.environment))},e.prototype.reconcile=function(t,e,n,r){var i=!this.options.isTargetType(e);if(!t.isDetaching&&(t.type===this&&(i?e===t.snapshot:e===t.storedValue)))return t.setParent(n,r),t;var o=i?this.options.fromSnapshot(e,n.root.environment):e,a=this.instantiate(n,r,void 0,o);return t.die(),a},e}(ft),Qn={enumeration:function(t,e){var n="string"===typeof t?e:t,r=Pn.apply(void 0,v(n.map((function(t){return bn(""+t)}))));return"string"===typeof t&&(r.name=t),r},model:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"===typeof t[0]?t.shift():"AnonymousModel",r=t.shift()||{};return new rn({name:n,properties:r})},compose:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"===typeof t[0],r=n?t[0]:"AnonymousModel";return n&&t.shift(),t.reduce((function(t,e){return t.cloneAndEnhance({name:t.name+"_"+e.name,properties:e.properties,initializers:e.initializers,preProcessor:function(n){return e.applySnapshotPreProcessor(t.applySnapshotPreProcessor(n))},postProcessor:function(n){return e.applySnapshotPostProcessor(t.applySnapshotPostProcessor(n))}})})).named(r)},custom:function(t){return new qn(t)},reference:Ln,safeReference:function(t,e){var n=Ln(t,f(f({},e),{onInvalidated:function(t){e&&e.onInvalidated&&e.onInvalidated(t),t.removeRef()}}));return e&&!1===e.acceptsUndefined?n:En(n)},union:Pn,optional:In,literal:bn,maybe:En,maybeNull:function(t){return lt(t,1),Pn(t,jn)},refinement:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"===typeof t[0]?t.shift():ht(t[0])?t[0].name:null,r=t[0],i=t[1],o=t[2]?t[2]:function(t){return"Value does not respect the refinement predicate"};return lt(r,[1,2]),Ce(),Te(),Te(),new mn(n,r,i,o)},string:sn,boolean:pn,number:un,integer:cn,Date:dn,map:function(t){return new Ge("map<string, "+t.name+">",t)},array:function(t){return lt(t,1),new Ye(t.name+"[]",t)},frozen:function(t){return 0===arguments.length?xn:ht(t)?new Dn(t):In(xn,t)},identifier:Jn,identifierNumber:Yn,late:function(t,e){var n="string"===typeof t?t:"late("+t.toString()+")",r="string"===typeof t?e:t;return new Vn(n,r)},undefined:hn,null:fn,snapshotProcessor:function(t,e,n){return lt(t,1),new He(t,e,n)}}}.call(this,n("8oxB"))}}]);
//# sourceMappingURL=4c4ba9aa.36f4e04b9685acb4373a.js.map